{
  "info": {
    "_postman_id": "c8d02188-cd39-4fba-a633-5688fbee7d90",
    "name": "CPAUMS",
    "description": "test api endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "20606298"
  },
  "item": [
    {
      "name": "AppVersion CRUD",
      "item": [
        {
          "name": "get all versions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/versions",
              "host": ["{{localhost}}"],
              "path": ["api", "versions"]
            }
          },
          "response": []
        },
        {
          "name": "get version by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/versions/1",
              "host": ["{{localhost}}"],
              "path": ["api", "versions", "1"]
            }
          },
          "response": []
        },
        {
          "name": "get latest version",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/versions/latest?platform=android",
              "host": ["{{localhost}}"],
              "path": ["api", "versions", "latest"],
              "query": [{"key": "platform", "value": "android"}]
            }
          },
          "response": []
        },
        {
          "name": "create new version",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json", "type": "text"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"version\": \"4.0.0\",\n    \"platform\": \"android\",\n    \"releaseDate\": \"2026-02-01T10:00:00\",\n    \"changelog\": \"Новая фича\",\n    \"updateType\": \"mandatory\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{localhost}}/api/versions",
              "host": ["{{localhost}}"],
              "path": ["api", "versions"]
            }
          },
          "response": []
        },
        {
          "name": "update version",
          "request": {
            "method": "PUT",
            "header": [{"key": "Content-Type", "value": "application/json", "type": "text"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"changelog\": \"Обновленный changelog\",\n    \"updateType\": \"MANDATORY\",\n    \"isActive\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{localhost}}/api/versions/1",
              "host": ["{{localhost}}"],
              "path": ["api", "versions", "1"]
            }
          },
          "response": []
        },
        {
          "name": "delete version",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/versions/1",
              "host": ["{{localhost}}"],
              "path": ["api", "versions", "1"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "UserDevice CRUD",
      "item": [
        {
          "name": "create device",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json", "type": "text"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"test_user_1\",\n    \"platform\": \"ANDROID\",\n    \"currentVersion\": \"2.0.0\"\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{localhost}}/api/devices",
              "host": ["{{localhost}}"],
              "path": ["api", "devices"]
            }
          },
          "response": []
        },
        {
          "name": "get all devices",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices",
              "host": ["{{localhost}}"],
              "path": ["api", "devices"]
            }
          },
          "response": []
        },
        {
          "name": "get device by id",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/1",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "1"]
            }
          },
          "response": []
        },
        {
          "name": "get devices by user",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/user/test_user_1",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "user", "test_user_1"]
            }
          },
          "response": []
        },
        {
          "name": "update device version",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/1/version?version=3.0.0",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "1", "version"],
              "query": [{"key": "version", "value": "3.0.0"}]
            }
          },
          "response": []
        },
        {
          "name": "delete device",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/1",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "1"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Update & Stats",
      "item": [
        {
          "name": "check update",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/update/check?userId=test123&current=1.0.0&platform=IOS",
              "host": ["{{localhost}}"],
              "path": ["api", "update", "check"],
              "query": [
                {"key": "userId", "value": "test123"},
                {"key": "current", "value": "1.0.0"},
                {"key": "platform", "value": "IOS"}
              ]
            }
          },
          "response": []
        },
        {
          "name": "log update",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json", "type": "text"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"test123\",\n    \"fromVersion\": \"1.0.0\",\n    \"toVersion\": \"2.0.0\",\n    \"platform\": \"IOS\",\n    \"success\": true\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{localhost}}/api/update/log",
              "host": ["{{localhost}}"],
              "path": ["api", "update", "log"]
            }
          },
          "response": []
        },
        {
          "name": "get stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/stats/updates",
              "host": ["{{localhost}}"],
              "path": ["api", "stats", "updates"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Tests",
      "item": [
        {
          "name": "invalid platform",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/versions/latest?platform=wertyhjukergrthtyrth",
              "host": ["{{localhost}}"],
              "path": ["api", "versions", "latest"],
              "query": [{"key": "platform", "value": "wertyhjukergrthtyrth"}]
            }
          },
          "response": []
        },
        {
          "name": "invalid device data",
          "request": {
            "method": "POST",
            "header": [{"key": "Content-Type", "value": "application/json", "type": "text"}],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"userId\": \"\",\n    \"platform\": \"INVALID\",\n    \"currentVersion\": null\n}",
              "options": {"raw": {"language": "json"}}
            },
            "url": {
              "raw": "{{localhost}}/api/devices",
              "host": ["{{localhost}}"],
              "path": ["api", "devices"]
            }
          },
          "response": []
        },
        {
          "name": "non existent device",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/9999",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "9999"]
            }
          },
          "response": []
        },
        {
          "name": "non existent user",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{localhost}}/api/devices/user/nonexistent",
              "host": ["{{localhost}}"],
              "path": ["api", "devices", "user", "nonexistent"]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {"key": "localhost", "value": "http://localhost:8080", "type": "default"}
  ]
}